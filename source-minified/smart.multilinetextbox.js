
/* Smart HTML Elements v1.0.0 (2018-April) 
Copyright (c) 2011-2018 jQWidgets. 
License: http://htmlelements.com/pricing/ */

 "use strict";Smart("smart-multiline-text-box",function(e){function a(){return babelHelpers.classCallCheck(this,a),babelHelpers.possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return babelHelpers.inherits(a,e),babelHelpers.createClass(a,[{key:"template",value:function(){return'<div id="container">\n                    <span id="label" inner-h-t-m-l="[[label]]" class ="smart-label"></span>\n                    <div id="innerContainer" class="smart-inner-container">\n                            <textarea id="input"\n                                autocapitalize="[[autoCapitalize]]"\n                                autocomplete="off"\n                                autofocus="[[autoFocus]]"\n                                cols="[[cols]]"\n                                disabled="[[disabled]]"\n                                inner-h-t-m-l="[[value]]"\n                                maxlength="[[maxLength]]"\n                                minlength="[[minLength]]"\n                                name="[[name]]"\n                                placeholder="[[placeholder]]"\n                                readonly="[[readonly]]"\n                                required="[[required]]"\n                                rows="[[rows]]"\n                                spellcheck="[[spellCheck]]"\n                                wrap="[[wrap]]"></textarea>\n                            <smart-scroll-bar id="verticalScrollBar" disabled="[[disabled]]" orientation="vertical" class ="bottom-right-visible"></smart-scroll-bar>\n                            <smart-scroll-bar id="horizontalScrollBar" disabled="[[disabled]]" class ="bottom-right-visible"></smart-scroll-bar>\n                            <div id="resizeElement" class ="smart-resize-element"></div>\n                    </div>\n                            <textarea id="textBoxHidden"\n                                class ="smart-text-box-hidden"\n                                autocapitalize="[[autoCapitalize]]"\n                                autocomplete="off"\n                                autofocus="[[autoFocus]]"\n                                cols="[[cols]]"\n                                disabled="[[disabled]]"\n                                inner-h-t-m-l="[[value]]"\n                                maxlength="[[maxLength]]"\n                                minlength="[[minLength]]"\n                                name="[[name]]"\n                                placeholder="[[placeholder]]"\n                                readonly="[[readonly]]"\n                                required="[[required]]"\n                                rows="[[rows]]"\n                                spellcheck="[[spellCheck]]"\n                                wrap="[[wrap]]"></textarea>\n                    <span id="hint" class ="smart-hint"></span>\n                </div>'}},{key:"propertyChangedHandler",value:function(e,l,t){var n=this;switch(e){case"displayMode":switch(t){case"escaped":n.$.input.value=n._toEscapedDisplayMode(n.value);break;default:n.$.input.value=n.value=n._toDefaultDisplayMode(n.$.input.value)}n._autoExpandUpdate(),n._handleScrollbarsDisplay();break;case"value":switch(n.displayMode){case"escaped":n.$.input.value=n._toEscapedDisplayMode(n.value);break;default:n.$.input.value=n.value}n._autoExpandUpdate(),n._handleScrollbarsDisplay();break;case"allowHorizontalScrollbar":case"allowVerticalScrollbar":case"singleLine":case"wrap":case"resizable":case"placeholder":n._autoExpandUpdate(),n._handleScrollbarsDisplay();break;case"selectionEnd":case"selectionStart":n._handleSelectedText();break;case"rows":case"cols":n._updateSizeRowsCols();break;case"disabled":n._setFocusable();break;case"readonly":break;default:babelHelpers.get(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"propertyChangedHandler",this).call(this,e,l,t)}}},{key:"selection",value:function(e){var a=this,l=a.$.input.selectionStart,t=a.$.input.selectionEnd,n=a.value;return"escaped"===a.displayMode?(n=a.$.input.value.substring(l,t),"escaped"===e?n:a._toDefaultDisplayMode(n)):"escaped"===e?(n=n.substring(l,t),a._toEscapedDisplayMode(n)):n=n.substring(l,t)}},{key:"select",value:function(e,a){var l=this,t=Array.from(arguments).slice(0,2),n=void 0,i=void 0;for(var r in t)t[r]=parseInt(t[r])||0;return 2===t.length?(n=Math.min([e,a]),i=Math.max([e,a])):n=t[0],2===t.length?(n=parseInt(n),n=n>0?n<l.$.input.length?l.$.input.length:n:0,i<n?i=n:i>l.$.input.length&&(n=0),l.$.input.focus(),void l.$.input.setSelectionRange(n,i)):1===t.length?(l.$.input.focus(),void l.$.input.setSelectionRange(n,n+1)):void l.$.input.select()}},{key:"_autoExpandUpdate",value:function(){var e=this;e.autoExpand&&(e.$.textBoxHidden.value=e.$.input.value,e.$.textBoxHidden.style.cssText="height:0px",e.$.input.style.cssText="height:"+e.$.textBoxHidden.scrollHeight+"px")}},{key:"_blurHandler",value:function(){this.removeAttribute("focused")}},{key:"_createElement",value:function(){var e=this;e._setFocusable(),e._syncTextBoxContentOnInitialization(),e._scrollView=new Smart.Utilities.Scroll(e.$.input,e.$.horizontalScrollBar,e.$.verticalScrollBar),e._autoExpandUpdate(),e._handleScrollbarsDisplay(),e._initializationValue=e.value,e.value.length>0?e.$.addClass("has-value"):e.$.removeClass("has-value"),e._handleHintContainer()}},{key:"_handleScrollbarsDisplay",value:function(){var e=this,a=e.$.input;setTimeout(function(){e.allowHorizontalScrollbar&&a.scrollWidth>a.clientWidth?(e.$container.addClass("hscroll"),e._scrollView.scrollWidth=a.scrollWidth-a.clientWidth):e.$container.removeClass("hscroll"),e.allowVerticalScrollbar&&a.scrollHeight>a.clientHeight?(e.$container.addClass("vscroll"),e._scrollView.scrollHeight=a.scrollHeight-a.clientHeight):e.$container.removeClass("vscroll")},0)}},{key:"_focusHandler",value:function(){var e=this;e.disabled||(e.setAttribute("focused",""),e.selectAllOnFocus&&e.$.input.select())}},{key:"_horizontalScrollbarHandler",value:function(e){var a=this;!a.disabled&&a.allowHorizontalScrollbar&&(e.stopPropagation(),a.$.input.scrollLeft=e.detail.value)}},{key:"_keyDownHandler",value:function(e){function a(a){var t=l.$.input.selectionStart,n=l.$.input.selectionEnd,i=l.$.input.value;e.preventDefault(),l.$.input.value=i.substring(0,t)+a+i.substring(n,i.length),l.value=l._toDefaultDisplayMode(l.$.input.value),l.$.input.selectionStart=t+2,l.$.input.selectionEnd=t+2}var l=this,t=e.key,n=l.$.input.value;switch(t){case"PageUp":l._scrollView.scrollTop=0,l.$.input.scrollTop=0,l.$.input.selectionStart=l.$.input.selectionEnd=0;break;case"PageDown":l._scrollView.scrollTop=l._scrollView.scrollHeight,l.$.input.scrollTop=l._scrollView.scrollHeight,l.$.input.selectionStart=l.$.input.selectionEnd=l.$.input.value.length;break;case"Enter":"escaped"===l.displayMode&&a("\\n");break;case" ":"escaped"===l.displayMode&&a("\\s");break;case"Backspace":if("escaped"===l.displayMode&&l.$.input.selectionStart===l.$.input.selectionEnd){var i=l.$.input.selectionStart;"\\"!==n[i-2]||"s"!==n[i-1]&&"n"!==n[i-1]||(l.$.input.value=l.$.input.value.substring(0,i-2)+l.$.input.value.substring(i-2,l.$.input.value.length),l.$.input.selectionStart=i-2)}l._scrollView&&l._handleScrollbarsDisplay()}}},{key:"_keyUpHandler",value:function(e){var a=this;switch(e.key){case"ArrowLeft":case"ArrowUp":case"ArrowDown":a._handlePointerInEscapedSymbol();break;case"ArrowRight":a._handlePointerInEscapedSymbol("next")}a._autoExpandUpdate(),a.value="escaped"===a.displayMode?a._toDefaultDisplayMode(a.$.input.value):a.$.input.value}},{key:"_textBoxKeyDownHandler",value:function(){var e=this;e._scrollView&&e._handleScrollbarsDisplay(),e._autoExpandUpdate(),e.value.length>0?e.$.addClass("has-value"):e.$.removeClass("has-value")}},{key:"_mouseWheelHandler",value:function(e){var a=this;a.disabled||(a.allowVerticalScrollbar&&a._scrollView.scrollTo(a._scrollView.scrollTop+(e.deltaY<0?-a.offsetHeight:a.offsetHeight)),a.$.input.scrollTop+=e.deltaY<0?-a.offsetHeight:a.offsetHeight)}},{key:"_syncTextBoxContentOnInitialization",value:function(){var e=this,a=void 0;if(a=""===e.value?e.innerHTML:e.value,"escaped"===e.displayMode)return void(a.match(/\r\n|\n\r|\n|\r|\s|\t|\f|\r/g)?(e.value=e._initializationValue=a,e.$.input.value=e._toEscapedDisplayMode(a)):(e.value=e._initializationValue=e._toDefaultDisplayMode(a),e.$.input.value=a));e.$.input.value=e.value=e._initializationValue=a}},{key:"_textBoxChangeHandler",value:function(e){var a=this,l=a.value;if("escaped"===a.displayMode){var t=a.$.input.selectionStart,n=a.$.input.selectionEnd,i=e.clipboardData||e.originalEvent&&e.originalEvent.clipboardData||window.clipboardData;if(i){var r=i.getData("text"),o=a.$.input.value;e.preventDefault(),r=a._toEscapedDisplayMode(r),a.$.input.value=o.substring(0,t)+r+o.substring(n,o.length)}a.value=a._toDefaultDisplayMode(a.$.input.value)}else a.value=a.$.input.value;a._handleScrollbarsDisplay(),a.value.length>0?a.$.addClass("has-value"):a.$.removeClass("has-value"),a.$.fireEvent("change",{newValue:a.value,oldValue:l}),a._handleHintContainer()}},{key:"_resizeDownHandler",value:function(){var e=this;!e.disabled&&e.resizable&&(e._resizeStarted=!0,e.$container.addClass("smart-resize"),e.readonly||e.$.input.setAttribute("readonly",""))}},{key:"_resizeMoveHandler",value:function(e){var a=this;if(!a.disabled&&a.resizable&&a._resizeStarted){var l=a.getBoundingClientRect(),t={width:50,height:50},n=e.clientX-l.left,i=e.clientY-l.top;n>t.width&&(a.style.width=n+"px"),i>t.height&&(a.style.height=i+"px")}}},{key:"_updateSizeRowsCols",value:function(){var e=this;e.$.container.removeAttribute("style"),setTimeout(function(){if(e.allowHorizontalScrollbar||e.allowVerticalScrollbar){var a=e.getBoundingClientRect();e.$.container.style.width=a.width+"px",e.$.container.style.height=a.height+"px"}},0)}},{key:"_upHandler",value:function(e){var a=this;if(!a.disabled){if(e.originalEvent.target===a.$.input)return void a._handlePointerInEscapedSymbol();a.$container.removeClass("smart-resize"),a.readonly||a.$.input.removeAttribute("readonly"),a._resizeStarted&&a.$.input.focus(),a._resizeStarted=!1}}},{key:"_verticalScrollbarHandler",value:function(e){var a=this;!a.disabled&&a.allowVerticalScrollbar&&(e.stopPropagation(),a.$.input.scrollTop=e.detail.value)}},{key:"_selectStartHandler",value:function(){}}],[{key:"properties",get:function(){return{allowHorizontalScrollbar:{value:!1,type:"boolean"},allowVerticalScrollbar:{value:!1,type:"boolean"},autoCapitalize:{value:"none",allowedValues:["none","words","characters"],type:"string"},autoComplete:{value:"off",allowedValues:["on","off"],type:"string"},autoExpand:{value:!1,type:"boolean"},cols:{value:20,type:"number?"},resizable:{value:!1,type:"boolean"},rows:{value:5,type:"number?"},selectionDirection:{value:"none",allowedValues:["forward","backward","none"],type:"string"},selectionEnd:{value:0,reflectToAttribute:!1,type:"number"},selectionStart:{value:0,reflectToAttribute:!1,type:"number"},spellCheck:{value:!1,type:"boolean"},wrap:{value:"soft",allowedValues:["hard","soft","off"],type:"string"}}}},{key:"listeners",get:function(){return{"container.resize":"_handleScrollbarsDisplay","document.move":"_resizeMoveHandler","document.up":"_upHandler",focus:"_focusHandler","horizontalScrollBar.change":"_horizontalScrollbarHandler",keydown:"_keyDownHandler",mouseenter:"_mouseEventsHandler",mouseleave:"_mouseEventsHandler",resize:"_handleScrollbarsDisplay","resizeElement.down":"_resizeDownHandler",styleChanged:"_handleScrollbarsDisplay","input.change":"_textBoxChangeHandler","input.focus":"_focusHandler","input.blur":"_blurHandler","input.keydown":"_textBoxKeyDownHandler","input.keyup":"_keyUpHandler","input.paste":"_textBoxChangeHandler","input.select":"_textBoxSelectHandler",wheel:"_mouseWheelHandler","verticalScrollBar.change":"_verticalScrollbarHandler"}}},{key:"requires",get:function(){return{"Smart.ScrollBar":"smart.scrollbar.js"}}}]),a}(Smart.TextBox));
//# sourceMappingURL=smart.multilinetextbox.js.map
