
/* Smart HTML Elements v1.0.0 (2018-April) 
Copyright (c) 2011-2018 jQWidgets. 
License: http://htmlelements.com/pricing/ */

 "use strict";Smart.Utilities.Assign("TickIntervalHandler",function(){function e(i,t,a,l,r,n,s){babelHelpers.classCallCheck(this,e);var o=this;o.context=i,o.minLabel=t,o.maxLabel=a,o.labelClass=l,o.dimension=r,o.logarithmic=s,o.labelsSize=o.getMinAndMaxLabelSize(),n?(o.getNiceInterval=o.getNiceIntervalInteger,o.getPossibleBiggerLabel=o.getPossibleBiggerLabelInteger):(o.getNiceInterval=o.getNiceIntervalFloatingPoint,o.getPossibleBiggerLabel=o.getPossibleBiggerLabelFloatingPoint)}return babelHelpers.createClass(e,[{key:"getInterval",value:function(e,i,t,a){var l=this.context,r=l._measurements.innerRadius,n=void 0,s=1;"radial"===e?(n=Math.max(this.labelsSize.minLabelSize,this.labelsSize.minLabelOtherSize,this.labelsSize.maxLabelSize,this.labelsSize.maxLabelOtherSize),s=1.35):(n=Math.max(this.labelsSize.minLabelSize,this.labelsSize.maxLabelSize),s=1.45),n*=s;var o=void 0;o="radial"===e?function(){var e=2*Math.PI*r*(Math.abs(l.startAngle-l.endAngle)/360);return Math.round(e)}():l[this.dimension]-this.labelsSize.minLabelSize/2-this.labelsSize.maxLabelSize/2;var m=Math.ceil(o/n),b="radial"===e?4*m:3*m,g=this.getNiceInterval(i,t,m,!0),h=this.getNiceInterval(i,t,b);if(l._cachedLabelsSize=this.labelsSize,m>2){var c=this.getPossibleBiggerLabel(m,g);if(c.length>Math.max(this.minLabel.length,this.maxLabel.length)){var u=this.minLabel;this.minLabel=c,this.labelsSize=this.getMinAndMaxLabelSize(),l._cachedLabelsSize=this.labelsSize;var S=this.getInterval(e,i,t,a);return this.minLabel=u,this.labelsSize=this.getMinAndMaxLabelSize(),S}}return{major:g,minor:h}}},{key:"getNiceIntervalFloatingPoint",value:function(e,i,t,a){var l=i-e,r=Math.floor(Math.log10(l)-Math.log10(t)),n=Math.pow(10,r),s=t*n,o=void 0;o=l<2*s?1:l<3*s?2:l<7*s?5:10;var m=o*n;if(a&&this.context._range/m>t){switch(o){case 5:o=10;break;case 2:o=5;break;case 1:o=2}m=o*n}return this.nearestPowerOfTen=n,this.logarithmic&&a?Math.max(1,m):m}},{key:"getPossibleBiggerLabelFloatingPoint",value:function(e,i){var t=this.context,a=parseFloat(t.min-t._numericProcessor.getPreciseModulo(parseFloat(t.min),i)+parseFloat(i)),l=a,r=void 0,n=void 0;this.logarithmic&&(a=Math.pow(10,a)),r=t._formatLabel(a);for(var s=1;s<e;s++)l+=i,n=this.logarithmic?Math.pow(10,l):l,n=t._formatLabel(n),n.length>r.length&&(r=n);return r}},{key:"getNiceIntervalInteger",value:function(e,i,t,a){var l=new Smart.Utilities.BigNumber(i).subtract(new Smart.Utilities.BigNumber(e)),r=Math.floor(Math.log10(l.toString())-Math.log10(t)),n=new Smart.Utilities.BigNumber(10).pow(new Smart.Utilities.BigNumber(r)),s=new Smart.Utilities.BigNumber(t).multiply(n),o=void 0;o=-1===l.compare(new Smart.Utilities.BigNumber(2*s))?1:-1===l.compare(new Smart.Utilities.BigNumber(3*s))?2:-1===l.compare(new Smart.Utilities.BigNumber(7*s))?5:10;var m=new Smart.Utilities.BigNumber(o).multiply(n);if(a&&1===new Smart.Utilities.BigNumber(this.context._range).divide(m).compare(t)){switch(o){case 5:o=10;break;case 2:o=5;break;case 1:o=2}m=new Smart.Utilities.BigNumber(o).multiply(n)}return-1===m.compare(1)&&(m=new Smart.Utilities.BigNumber(1)),this.nearestPowerOfTen=n,m}},{key:"getPossibleBiggerLabelInteger",value:function(e,i){var t=this.context,a=new Smart.Utilities.BigNumber(10),l=new Smart.Utilities.BigNumber(t.min).subtract(new Smart.Utilities.BigNumber(t.min).mod(i)).add(i),r=l,n=void 0,s=void 0;this.logarithmic&&(l=a.pow(l)),n=t._formatLabel(l);for(var o=1;o<e;o++)r=r.add(i),s=this.logarithmic?a.pow(r):r,s=t._formatLabel(s),s.length>n.length&&(n=s);return n}},{key:"getMinAndMaxLabelSize",value:function(){var e=this,i=e.context,t=i.$.container,a=document.createElement("span");a.className=e.labelClass,a.style.position="absolute",a.style.visibility="hidden",t.appendChild(a),a.innerHTML=e.minLabel;var l=a[e.dimension],r=a[i._settings.otherSize];a.innerHTML=e.maxLabel;var n=a[e.dimension],s=a[i._settings.otherSize];return t.removeChild(a),{minLabelSize:l,minLabelOtherSize:r,maxLabelSize:n,maxLabelOtherSize:s}}}]),e}());
//# sourceMappingURL=smart.tickintervalhandler.js.map
